<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" sizes="16x16" href="images/icon16.ico?a"> <!-- compatibility -->
<link rel="shortcut icon" sizes="16x16" href="images/icon16.png?a"> <!-- firefox -->
<link rel="icon" sizes="32x32" href="images/icon32.png?a"> <!-- chrome -->
<link rel="icon" sizes="192x192" href="images/iconbig.png?a"> <!-- large -->
<link rel="apple-touch-icon" href="images/iconbig.png?a"> <!-- large 2 -->
<link rel="image_src" href="images/iconbig.png?a"> <!-- large 3 -->

<!--START-->
<link rel="stylesheet" href="fonts.css?a">
<link rel="stylesheet" href="style.css?T">
<link rel="stylesheet" href="markup.css?n">
<link rel="stylesheet" href="code.css?a">

<script src="event.js?a"></script>
<script src="storage.js?a"></script>

<script src="myself.js?E"></script>

<script src="lp.js?b"></script>

<script src="sbhighlight.js?a"></script>
<script src="parse.js?u"></script>

<script src="render.js?A"></script>
<script src="view.js?A"></script>
<script src="main.js?Q"></script>

<!-- NEXT TASK: Clean up html/css !
	  THere is a lot of repeated stuff
	  item/textitem are good -- improve them!
	  there is an issue: max-width: 100%; is not a sustainable solution
	  consider switching to display: inline; and then using padding on the container? or something.
	  this allows the float: right elements to be mixed in with the text which is nice, 
	  though honestly INLINE might be too limiting. but either way, we need a better solution than max-width: 100%;

	  problem 2:
	  I think, on small devices, the whole "main document should not scroll"
	  idea is not good.
	  perhaps have a separate mode or something, idk.
	  I don't think pages (or at least, DEFINITELY not discussions) should be in big unscrolling boxes (with only the main page scrolling)
	  but at the very least, like
	  perhaps make the main page have a min height of like 600px and the viewport scrolls inside that? idk
  -->
<!--END-->
<body class="pageMode" id="$main">
	<!--
		 
	  -->
	<nav class="headerPane bar">
		<a href="#" class="textItem"><img class="item" src="images/iconbig.png?a" alt="SBS"></a> <span id="$navPane" class="path textItem"></span>
		<!--<span class="homeMode textItem path"><a href="#categories/0" class="textItem">Activity</a><span class="pathSeparator">|</span><a class="textItem" href="#activity">[root]</a><span class="pathSeparator">|</span><a class="textItem" href="#users">Users</a><span class="pathSeparator">|</span><a class="textItem" href="#files">Files</a><span>-->

		<span class="rightAlign textItem">
			<div class="buttonContainer item"><button id="$openSidebar">|||</button></div><!--<button id="$reload" class="item">Reload</button>--><!--<input id="$search" placeholder="Search" class="item">--><div class="loggedIn textItem" id="$loggedIn"><a class="item userLink" id="$myUserLink"><span class="myName username textItem" id="$myName" class="item"></span><img class="myAvatar item avatar" id="$myAvatar"></a></div>
		</span>
	</nav>

	<header class="titlePane bar rem2-3" id="$titlePane">
		<span id="$pageTitleIcon"></span><h1 class="pageTitle textItem pre" id="$pageTitle"></h1><a class="textItem userMode loggedIn myUserPage" href="#usersettings">Settings</a><div class="buttonContainer item loggedIn myUserPage"><button id="$logout">Log Out</button></div><input class="item editorMode" id="$titleInput" placeholder="Page Title" required><input class="item cateditMode" id="$cateditTitle" placeholder="Category Title" required><div class="buttonContainer item editorMode"><button id="$submitEdit" >Submit</button></div><span class="cateditMode textItem"><div class="buttonContainer item"><button id="$cateditSubmit">Submit</button></div></span><span class="textItem pageMode" id="$voteBox"><div class="buttonContainer item"><button id="$voteButton_b" class="voteButton" data-vote="b">Bad<br><span id="$voteCount_b">x</span></button></div><div class="buttonContainer item"><button id="$voteButton_o" class="voteButton" data-vote="o">Ok<br><span id="$voteCount_o">x</span></button></div><div class="buttonContainer item"><button id="$voteButton_g" class="voteButton" data-vote="g">Great<br><span id="$voteCount_g">x</span></button></div></span>
		<label for="$watchCheck" class="textItem pageMode">Watching:</label>
		<input type="checkbox" id="$watchCheck" class="item pageMode">

		<div class="pageCreate textItem rightAlign">
			<div class="buttonContainer editorMode item"><button id="$deletePage">DELETE</button></div><div class="buttonContainer item canEdit"><a id="$editButton"><button tabindex="-1">Edit</button></a></div><span class="textItem" id="$authorBox"></span>
		</div>
	</header>

	<div class="sideBarContainer">
		<div class="m">
			<div class="userlistPane userlist rem2-3 chatMode bar" id="$chatUserlist"></div>
			
			<div class="infoPane editorMode">
				<label for="$keywords">Keywords:</label><input placeholder="(space separated, optional)" id="$keywords"><br>
				<label for="$editPageType">Type:</label><input placeholder="@" id="$editPageType"><br>
				<label for="$editPageCategory">Category id:</label><input type="number" placeholder="id" id="$editPageCategory"><br>
				<label for="$permissions">Permissions:</label><input id="$permissions"><br>
				<label for="$markupSelect">Markup language:</label>
				<select id="$markupSelect">
					<option value="plaintext">plain text</option>
					<option value="12y">12-y documentation markup format</option>
					<option value="bbcode">bbcode</option>
				</select><button id="$markupUpdate">Update Preview</button>
			</div>

			<div class="fileMode fileNav rem1-7 nav">
				<div class="buttonContainer item"><a id="$filePrev"><button>&lt;</button></a></div><div class="buttonContainer item"><a id="$fileNext"><button>&gt;</button></a></div><span class="textItem" id="$filePageNumber"></span><input type="file" id="$fileUpload" accept="image/*" class="item loggedIn">
			</div>

			<div class="fileMode fileBox" id="$fileBox">
			</div>

			<div class="fileMode">
				<div class="buttonContainer fileUploading"><button id="$fileUploadButton">Upload Image!</button></div>
				<div class="fileSelected">
					<div class="buttonContainer loggedIn"><button id="$setAvatarButton">Use As Avatar</button></div><br class="loggedIn">
					Name:<input id="$fileName"><br>
					Permissions:<input id="$filePermissions"><br>
					Values:<input id="$fileValues"><br>
					<div class="buttonContainer loggedIn"><button id="$fileUpdateButton">Save Settings</button></div>
				</div>
			</div>
			
			
			<div class="activityMode categoryNav rem1-7 nav">
				<span class="textItem"><a id="$activityPagePrev"><button class="item">&lt;</button></a><a id="$activityPageNext"><button class="item">&gt;</button></a><span class="textItem" id="$activityPageNumber"></span></span>
			</div>
			
			<div class="membersMode memberNav nav">
				<span class="textItem"><button id="$membersPrev" class="item">&lt;</button><button id="membersNext" class="item">&gt;</button></span>
			</div>



			<div class="userPageBox userMode">
				<a id="$userPageAvatarLink"><img id="$userPageAvatar" class="userPageAvatar avatar"></a>
				<div class="pageContents pre userPageContents" id="$userPageContents"></div>
			</div>
			
			<!--
				 These panes have the main content
				 one of them will be visible at a time, depending on the view mode
			  -->
			
			<main>
				<div class="cateditMode">
					<label for="$cateditPinned">Pinned pages:</label><input id="$cateditPinned"><br>
					<label for="$cateditCategory">Parent category:</label><input id="$cateditCategory" type="number"><br>
					<label for="$cateditPermissions">Permissions:</label><input id="$cateditPermissions"><br>
					<textarea id="$cateditDescription"></textarea><br>
				</div>
				
				<div id="$categoryDescription" class="categoryDescription pre pageContents categoryMode"></div>
				<div id="$categoryCategories" class="categoryMode"></div>
				<div id="$categoryPinned" class="categoryMode"></div>
				<div class="categoryMode categoryNav rem1-7">
					<span class="textItem"><button id="$categoryPagesPrev" class="item">&lt;</button><button id="$categoryPagesNext" class="item">&gt;</button></span>
					<span class="textItem" id="$categoryPageNumber"></span>
					<a class="textItem" id="$categoryCreatePage"><button class="item">Create Page</button></a>
				</div>
				<div id="$categoryPages" class="categoryPages categoryMode"></div>

				<div class="userActivity userMode" id="$userActivity"></div>

				<div class="pageInfoPane pageMode px40" id="$pageInfoPane">
					<span id="$gallery" class="gallery" style="display:none;"><button id="$galleryPrev" class="galleryButton">&lt;</button><img id="$galleryImage"><button id="$galleryNext" class="galleryButton rightAlign">&gt;</button></span>
					<span class="metaInfo">
						<span id="$metaKey" class="textItem"></span>
						<span id="$sbapiInfo" class="textItem"></span>
					</span>
					<!-- here we can put
						  tags, type, sb key info, etc.
					  -->
				</div>
				<div class="pageContents pre pageChatMode" id="$pageContents"></div>
				<div class="spacer pageChatMode"></div>

				<div id="$messageList" class="messageList pageChatMode"></div>
				
				<div class="editorPane editorMode">
					<div class="editorTextarea">
						<textarea id="$editorTextarea"></textarea>
					</div>
					<div class="editorPreview" id="$editorPreview"><div class="markup-root" ></div></div>
				</div>
				
				<div class="homeMode homePane">
					<a class="categoryPage bar rem2-3" href="#activity"><span class="textItem">Activity</span></a>
					<a class="categoryPage bar rem2-3" href="#categories/0"><span class="textItem">Pages</span></a>
					<a class="categoryPage bar rem2-3" href="#users"><span class="textItem">Users</span></a>
					<a class="categoryPage bar rem2-3" href="#files"><span class="textItem">Files</span></a>
				</div>
				<div class="membersMode memberPane">
					<div id="$memberList"></div>
				</div>

				<div class="registerMode">
					<form id="$registerForm">
						<input name="username" type="username" placeholder="Username" required minlength="3"><br>
						<input name="password" type="password" placeholder="Password" minlength="8" required><br>
						<input name="email" type="email" placeholder="Email" required><br>
						<button id="$register" onclick="event.preventDefault()">Register</button>
					</form>
					<button id="$resendEmail" onclick="event.preventDefault()">Resend Email</button>
					<div id="$registerError" class="pre"></div>
					<input id="$emailCode" placeholder="Confirmation Code"><br>
					<button id="$registerConfirm">Confirm</button>
				</div>

				<div class="settingsMode">
				</div>

				<div class="activityMode" id="$activity">
				</div>


				<div class="fileMode fileViewPane">
					<img id="$fileView" class="fileView"></img>
				</div>

				<div class="bottomSpacer"></div>
			</main>
			
			<!--
				 Bottom of the page
			  -->
			<div class="inputPane chatMode">
				<textarea id="$chatTextarea"></textarea>
				<div class="buttonContainer"><button id="$chatSend">Send</button></div>
			</div>

		</div>
		
		<div class="sideBar" id="$sidebar">
			<div class="buttonContainer closeSidebar"><button id="$closeSidebar">Close Sidebar</button></div><br>
			<form class="textItem loggedOut" id="$loggedOut"><a href="#register">Register</a><br>
				<input id="$username" placeholder="username" name="username" class="item loginField"><input id="$password" type="password" name="password" placeholder="password" class="item loginField"><br>
				<button class="item" id="$login" onclick="event.preventDefault()">Log In</button></form>			
		</div>
	</div>
</body>
