<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" sizes="16x16" href="favicon.ico?a"> <!-- compatibility -->
<link rel="shortcut icon" sizes="16x16" href="favicon.png?a"> <!-- firefox -->
<link rel="icon" sizes="32x32" href="icon32.png?a"> <!-- chrome -->
<link rel="icon" sizes="192x192" href="fav-big.png?b"> <!-- large -->
<link rel="apple-touch-icon" href="fav-big.png?b"> <!-- large 2 -->
<link rel="image_src" href="fav-big.png?b"> <!-- large 3 -->

<!--START-->
<link rel="stylesheet" href="fonts.css?a">
<link rel="stylesheet" href="style.css?w">
<link rel="stylesheet" href="markup.css?i">
<link rel="stylesheet" href="code.css?a">

<script src="event.js?a"></script>
<script src="storage.js?a"></script>

<script src="myself.js?w"></script>

<script src="lp.js?a"></script>

<script src="sbhighlight.js?a"></script>
<script src="parse.js?q"></script>

<script src="render.js?t"></script>
<script src="view.js?m"></script>
<script src="main.js?D"></script>

<!-- NEXT TASK: Clean up html/css !
THere is a lot of repeated stuff
item/textitem are good -- improve them!
there is an issue: max-width: 100%; is not a sustainable solution
consider switching to display: inline; and then using padding on the container? or something.
this allows the float: right elements to be mixed in with the text which is nice, 
though honestly INLINE might be too limiting. but either way, we need a better solution than max-width: 100%;

problem 2:
I think, on small devices, the whole "main document should not scroll"
idea is not good.
perhaps have a separate mode or something, idk.
I don't think pages (or at least, DEFINITELY not discussions) should be in big unscrolling boxes (with only the main page scrolling)
but at the very least, like
perhaps make the main page have a min height of like 600px and the viewport scrolls inside that? idk
-->
<!--END-->
<title>DAVE'S SHIT HOLE</title>

<body class="pageMode" id="$main">
	<!--
		 
	  -->
	<nav class="headerPane bar">
		<a href="#" class="textItem"><img class="item" src="fav-big.png?b" alt="SBS"></a>
		<span id="$navPane" class="path textItem"></span>

		<span class="rightAlign textItem">
			<button id="$reload" class="item">Reload</button>
			<input id="$search" placeholder="Search" class="item">
			<div class="loggedIn textItem" id="$loggedIn"><button id="$logout" class="textItem">Log Out</button><a class="textItem userLink" id="$myUserLink"><span class="myName username textItem" id="$myName" class="item"></span><img class="myAvatar item avatar" id="$myAvatar"></a></div><form class="textItem loggedOut" id="$loggedOut"><a href="#register">Register</a><input id="$username" placeholder="username" name="username" class="item loginField"><input id="$password" type="password" name="password" placeholder="password" class="item loginField"><button class="item" id="$login" onclick="event.preventDefault()">Log In</button></form>
		</span>
	</nav>
	
	<header class="titlePane bar" id="$titlePane">
		<h1 class="pageTitle textItem pre" id="$pageTitle"></h1>
		<a class="textItem userMode" href="#usersettings">Settings</a>
		<input class="item editorMode" id="$titleInput" placeholder="Page Title" required>
		<span class="editorMode textItem">
			<button id="$submitEdit" class="item">Submit</button><div class="textItem"></div>
		</span>
		<span class="textItem pageMode" id="$voteBox">
			<button id="$voteButton_b" class="item voteButton" data-vote="b">Bad<br><span id="$voteCount_b">x</span></button>
			<button id="$voteButton_o" class="item voteButton" data-vote="o">Ok<br><span id="$voteCount_o">x</span></button>
			<button id="$voteButton_g" class="item voteButton" data-vote="g">Great<br><span id="$voteCount_g">x</span></button>
		</span>
		<label for="$watchCheck" class="textItem pageMode">Watching:</label>
		<input type="checkbox" id="$watchCheck" class="item pageMode">

		<div class="pageCreate textItem rightAlign">
			<button id="$deletePage" class="item editorMode">DELETE</button>
			<a class="textItem pageUserMode" id="$pageEditButton"><button class="item" tabindex="-1">Edit</button></a>
			<span class="textItem" id="$authorBox"></span>
		</div>
	</header>
	
	<div class="userlistPane userlist chatMode bar" id="$chatUserlist"></div>
	
	<div class="infoPane editorMode">
		<label for="$keywords">Keywords:</label><input placeholder="(space separated, optional)" id="$keywords"><br>
		<label for="$editPageType">Type:</label><input placeholder="@" id="$editPageType"><br>
		<label for="$permissions">Permissions:</label><input id="$permissions"><br>
		<label for="$markupSelect">Markup language:</label>
		<select id="$markupSelect">
			<option value="plaintext">plain text</option>
			<option value="12y">12-y documentation markup format</option>
			<option value="bbcode">bbcode</option>
		</select><button id="$markupUpdate">Update</button>
	</div>

	<div class="activityMode categoryNav">
		<span class="textItem"><button id="$categoryPagesPrev" class="item">&lt;</button><button id="$categoryPagesNext" class="item">&gt;</button></span>
	</div>

	<div class="userPageBox userMode">
		<a id="$userPageAvatarLink"><img id="$userPageAvatar" class="userPageAvatar avatar"></a>
		<div class="pageContents pre userPageContents" id="$userPageContents"></div>
	</div>
	
	<!--
		 These panes have the main content
		 one of them will be visible at a time, depending on the view mode
	  -->
	<main class="paneGrow scroller">
		<div id="$categoryDescription" class="categoryDescription pre pageContents categoryMode"></div>
		<div id="$categoryCategories" class="categoryMode"></div>
		<div class="categoryMode categoryNav">
			<span class="textItem"><button id="$categoryPagesPrev" class="item">&lt;</button><button id="$categoryPagesNext" class="item">&gt;</button></span>
			<a class="textItem" id="$categoryCreatePage"><button class="item">Create Page</button></a>
		</div>
		<div id="$categoryPages" class="categoryPages categoryMode"></div>

		<div class="userActivity userMode" id="$userActivity"></div>

		<div class="pageContents pre pageChatMode" id="$pageContents"></div>
		<div class="spacer pageChatMode"></div>

		<div id="$messageList" class="messageList pageChatMode"></div>
		
		<div class="editorPane editorMode">
			<div class="editorTextarea">
				<textarea id="$editorTextarea"></textarea>
			</div>
			<div class="editorPreview" id="$editorPreview"><div class="markup-root" ></div></div>
		</div>
		
		<div class="homeMode homePane paneGrow">
			hey<br>
			Users: <a href="#users">here</a><br>
			Pages: <a href="#categories/0">here</a><br>
			Activity: <a href="#activity">here</a><br>
			<hr>
			<blockquote>
				why is this so fast<br>
				what the fuck
				<footer>- snail_</footer>
			</blockquote>
		</div>
		<div class="membersMode memberPane">
			<div id="$memberList"></div>
		</div>

		<div class="registerMode">
			<form id="$registerForm">
				<input name="username" type="username" placeholder="Username" required minlength="3"><br>
				<input name="password" type="password" placeholder="Password" minlength="8" required><br>
				<input name="email" type="email" placeholder="Email" required><br>
				<button id="$register" onclick="event.preventDefault()">Register</button>
			</form>
			<button id="$resendEmail" onclick="event.preventDefault()">Resend Email</button>
			<div id="$registerError" class="pre"></div>
			<input id="$emailCode" placeholder="Confirmation Code"><br>
			<button id="$registerConfirm">Confirm</button>
		</div>

		<div class="settingsMode">
			<img id="$settingsAvatar" class="userPageAvatar avatar"><br>
			<input type="file" accept="image/*" id="$settingsAvatarUpload" autocomplete="off">
			<button id="$settingsAvatarSubmit">Submit</button><br>
			<a id="$userPageLink">Edit User Page</a>
		</div>

		<div class="activityMode" id="$activity">
		</div>
		
		<div class="bottomSpacer"></div>
	</main>

	<!--
		 Bottom of the page
	  -->
	<div class="inputPane chatMode">
		<textarea id="$chatTextarea"></textarea>
		<button id="$chatSend">Send</button>
	</div>
</body>

<template style="display:none;" id="$elementCache">
	
</template>
	
