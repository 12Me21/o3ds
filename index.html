<!DOCTYPE html>
<meta charset="utf-8">
<script>console.log("test");</script>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" href="favicon.ico?a">
<link rel="icon" sizes="16x16" href="favicon.png?a">
<link rel="icon" sizes="192x192" href="fav-big.png?b">
<link rel="apple-touch-icon" href="fav-big.png?b">
<link rel="image_src" href="fav-big.png?b">

<!--START-->
<link rel="stylesheet" href="style.css?n">
<link rel="stylesheet" href="markup.css?b">
<link rel="stylesheet" href="code.css?a">

<script src="event.js?a"></script>
<script src="storage.js?a"></script>

<script src="myself.js?p"></script>

<script src="lp.js?a"></script>

<script src="sbhighlight.js?a"></script>
<script src="parse.js?i"></script>

<script src="render.js?i"></script>
<script src="view.js?d"></script>
<script src="main.js?u"></script>

<!--- NEXT TASK: Clean up html/css !
THere is a lot of repeated stuff
item/textitem are good -- improve them!
there is an issue: max-width: 100%; is not a sustainable solution
consider switching to display: inline; and then using padding on the container? or something.
this allows the float: right elements to be mixed in with the text which is nice, 
though honestly INLINE might be too limiting. but either way, we need a better solution than max-width: 100%;

problem 2:
I think, on small devices, the whole "main document should not scroll"
idea is not good.
perhaps have a separate mode or something, idk.
I don't think pages (or at least, DEFINITELY not discussions) should be in big unscrolling boxes (with only the main page scrolling)
but at the very least, like
perhaps make the main page have a min height of like 600px and the viewport scrolls inside that? idk
-->
<!--END-->
<script>console.log(me.auth)</script>

<body class="pageMode" id="$main">
	<!--
		 
	  -->
	<nav class="headerPane bar">
		<a href="#" class="textItem"><img class="item" src="favicon.svg" alt="SBS"></a>
		<span id="$navPane" class="path textItem"></span>

		<span class="rightAlign textItem">
			<input id="$search" placeholder="Search" class="item">
			<div class="loggedIn textItem" id="$loggedIn" style="display: none;"><button id="$logout" class="textItem">Log Out</button><a class="textItem" id="$myUserLink"><span class="myName textItem" id="$myName" class="item"></span><img class="myAvatar item" id="$myAvatar"></a></div><form class="textItem loggedOut" id="$loggedOut" style="display: none;"><a href="#register">Register</a><input id="$username" placeholder="username" name="username" class="item loginField"><input id="$password" type="password" name="password" placeholder="password" class="item loginField"><button class="item" id="$login" onclick="event.preventDefault()">Log In</button></form>
		</span>
	</nav>
	
	<header class="titlePane bar" id="$titlePane">
		<h1 class="pageTitle textItem" id="$pageTitle"></h1>
		<input class="item editorMode" id="$titleInput" placeholder="Page Title" required>
		<span class="editorMode textItem">
			<button id="$submitEdit" class="item">Submit</button><div class="textItem"></div>
		</span>
		<form class="textItem pageMode" id="$vote" autocomplete="off">
			<input type="radio" name="vote" value="b" id="voteB" class="item"><label for="voteB" class="textItem">Bad</label>
			<input type="radio" name="vote" value="o" id="voteO" class="item"><label for="voteO" class="textItem">OK</label>
			<input type="radio" name="vote" value="g" id="voteG" class="item"><label for="voteG" class="textItem">Good</label>
			<input type="radio" name="vote" value="" id="voteN" class="item">
		</form>

		<div class="pageCreate textItem rightAlign" id="$pageAuthorBox" style="display: none;">
			<button id="$deletePage" class="item editorMode">DELETE</button>
			<span class="textItem">
				<span class="textItem">Author:</span><a id="$authorLink" class="item"><span class="pageAuthorName textItem" id="$pageAuthorName"></span><img class="pageAuthorAvatar item" id="$pageAuthorAvatar"></a><span class="pageAuthorDate textItem" id="$pageAuthorDate">
				</span><!-- *standing in the middle of a mess of html*
"gosh, I guess I have to clean all this up, then" -->
			</span><a class="textItem pageMode" id="$pageEditButton"><button class="item">Edit</button></a><span id="$pageEdited" class="pageEdited"><span class="textItem">Edited:</span><a id="$editorLink"><span class="pageAuthorName textItem" id="$pageEditorName"></span><img class="pageAuthorAvatar item" id="$pageEditorAvatar"></a><span class="pageAuthorDate textItem" id="$pageEditorDate"></span>
			</span>
		</div>
	</header>
	
	<div class="userlistPane userlist chatMode bar" id="$chatUserlist"></div>
	
	<div class="infoPane editorMode">
		<label for="$keywords">Keywords:</label><input placeholder="(space separated, optional)" id="$keywords"><br>
		<label for="$permissions">Permissions:</label><input id="$permissions"><br>
		<label for="$markupSelect">Markup language:</label>
		<select id="$markupSelect">
			<option value="plaintext">plain text</option>
			<option value="12y">12-y documentation markup format</option>
			<option value="bbcode">bbcode</option>
		</select><button id="$markupUpdate">Update</button>
	</div>

	<!--
		 These panes have the main content
		 one of them will be visible at a time, depending on the view mode
	  -->
	<main class="paneGrow scroller">
		<div class="chatPageContents chatMode" id="$chatPageContents"></div>
		<div class="spacer chatMode"></div>
		<div id="$messageList" class="messageList chatMode"></div>
		
		<div id="$categoryDescription" class="categoryDescription pre pageContents categoryMode"></div>
		<div id="$categoryCategories" class="categoryMode"></div>
		<div class="categoryMode categoryNav">
			<span class="textItem"><button id="$categoryPagesPrev" class="item">&lt;</button><button id="$categoryPagesNext" class="item">&gt;</button></span>
			<a class="textItem" id="$categoryCreatePage"><button class="item">Create Page</button></a>
		</div>
		<div id="$categoryPages" class="categoryPages categoryMode"></div>

		<div class="userPageBox userMode">
			<img id="$userPageAvatar" class="userPageAvatar">
			<div class="pageContents pre" id="$userPageContents"></div>
		</div>
		<div class="userActivity userMode" id="$userActivity"></div>

		<div class="pageContents pre pageMode" id="$pageContents"></div>
		<div class="spacer pageMode"></div>
		<div class="pageUserlist userlist bar pageMode" title="Users viewing this page"></div>
		<div class="pageTextarea pageMode">
			<textarea id="$pageTextarea" autocomplete="off"></textarea>
		</div>
		<div class="pageComments pageMode"></div>
		
		<div class="editorPane editorMode">
			<div class="editorTextarea">
				<textarea id="$editorTextarea"></textarea>
			</div>
			<div class="editorPreview" id="$editorPreview"></div>
		</div>
		
		<div class="homeMode homePane paneGrow">
			hey<br>
			Users: <a href="#users">here</a><br>
			Pages: <a href="#categories/0">here</a><br>
			<hr>
			<blockquote>
				why is this so fast<br>
				what the fuck
				<footer>- snail_</footer>
			</blockquote>
		</div>
		<div class="membersMode memberPane">
			<div id="$memberList"></div>
		</div>

		<div class="registerMode">
			<form id="$registerForm">
				<input name="username" type="username" placeholder="Username" required minlength="3"><br>
				<input name="password" type="password" placeholder="Password" minlength="8" required><br>
				<input name="email" type="email" placeholder="Email" required><br>
				<button id="$register" onclick="event.preventDefault()">Register</button>
			</form>
			<button id="$resendEmail" onclick="event.preventDefault()">Resend Email</button>
			<div id="$registerError" class="pre"></div>
			<input id="$emailCode" placeholder="Confirmation Code"><br>
			<button id="$registerConfirm">Confirm</button>
		</div>

		<div class="settingsMode">
			<img id="$settingsAvatar" class="userPageAvatar"><br>
			<input type="file" accept="image/*" id="$settingsAvatarUpload" autocomplete="off"><br>
			<button id="$settingsAvatarSubmit">Submit</button>
		</div>
		
		<div class="bottomSpacer"></div>
	</main>

	<!--
		 Bottom of the page
	  -->
	<div class="inputPane chatMode">
		<textarea id="$chatTextarea"></textarea>
		<button id="$chatSend">Send</button>
	</div>
</body>
